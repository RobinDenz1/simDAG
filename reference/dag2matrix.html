<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Obtain a Adjacency Matrix from a DAG object — dag2matrix • simDAG</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Obtain a Adjacency Matrix from a DAG object — dag2matrix"><meta name="description" content="The sim_from_dag function requires the user to specify the causal relationships inside a DAG object containing node information. This function takes this object as input and outputs the underlying adjacency matrix. This can be useful to plot the theoretical DAG or to check if the nodes have been specified correctly."><meta property="og:description" content="The sim_from_dag function requires the user to specify the causal relationships inside a DAG object containing node information. This function takes this object as input and outputs the underlying adjacency matrix. This can be useful to plot the theoretical DAG or to check if the nodes have been specified correctly."><meta property="og:image" content="https://robindenz1.github.io/simDAG/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">simDAG</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.4.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/simDAG.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/v_sim_from_dag.html">Simulating Data from a known DAG</a></li>
    <li><a class="dropdown-item" href="../articles/v_using_formulas.html">Specifying Formulas in a DAG</a></li>
    <li><a class="dropdown-item" href="../articles/v_custom_nodes.html">Specifying Custom Node Types in a DAG</a></li>
    <li><a class="dropdown-item" href="../articles/v_sim_discrete_time.html">Simulating Data using a Discrete-Time Approach</a></li>
    <li><a class="dropdown-item" href="../articles/v_covid_example.html">Simulating Covid-19 Vaccine Data using a Discrete-Time Simulation</a></li>
    <li><a class="dropdown-item" href="../articles/v_sim_networks.html">Simulating Data from a DAG with Network Dependencies</a></li>
    <li><a class="dropdown-item" href="../articles/v_cookbook.html">simDAG Cookbook</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/RobinDenz1/siMDAG/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Obtain a Adjacency Matrix from a <code>DAG</code> object</h1>

      <div class="d-none name"><code>dag2matrix.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>The <code><a href="sim_from_DAG.html">sim_from_dag</a></code> function requires the user to specify the causal relationships inside a <code>DAG</code> object containing node information. This function takes this object as input and outputs the underlying adjacency matrix. This can be useful to plot the theoretical DAG or to check if the nodes have been specified correctly.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">dag2matrix</span><span class="op">(</span><span class="va">dag</span>, include_root_nodes<span class="op">=</span><span class="cn">TRUE</span>, include_td_nodes<span class="op">=</span><span class="cn">FALSE</span>,</span>
<span>           include_networks<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <p></p>
<dl><dt id="arg-dag">dag<a class="anchor" aria-label="anchor" href="#arg-dag"></a></dt>
<dd><p>A <code>DAG</code> object created using the <code><a href="empty_dag.html">empty_dag</a></code> function with nodes added to it using the <code>+</code> syntax. See <code><a href="empty_dag.html">?empty_dag</a></code> or <code><a href="node.html">?node</a></code> for more details. Supports DAGs with time-dependent nodes added using the <code><a href="node.html">node_td</a></code> function. However, including such DAGs may result in cyclic causal structures, because time is not represented in the output matrix.</p></dd>

  <dt id="arg-include-root-nodes">include_root_nodes<a class="anchor" aria-label="anchor" href="#arg-include-root-nodes"></a></dt>
<dd><p>Whether to include root nodes in the output matrix. Should usually be kept at <code>TRUE</code> (default).</p></dd>

  <dt id="arg-include-td-nodes">include_td_nodes<a class="anchor" aria-label="anchor" href="#arg-include-td-nodes"></a></dt>
<dd><p>Whether to include time-dependent nodes added to the <code>dag</code> using the <code><a href="node.html">node_td</a></code> function or not. When including these types of nodes, it is possible for the adjacency matrix to contain cycles, e.g. that it is not a classic DAG anymore, due to the matrix not representing the passage of time.</p></dd>

  <dt id="arg-include-networks">include_networks<a class="anchor" aria-label="anchor" href="#arg-include-networks"></a></dt>
<dd><p>Whether to include time-fixed networks added to the <code>dag</code> using the <code><a href="network.html">network</a></code> function or not. Usually it does not make sense to include those, because they are not classical nodes. This is mostly used internally to ensure that the generation of nodes and networks is processed in the right order.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>An adjacency matrix is simply a square matrix in which each node has one column and one row associated with it. For example, if the node A has a causal effect on node B, the matrix will contain <code>1</code> in the spot <code>matrix["A", "B"]</code>.</p>
<p>If a time-varying node is also defined as a time-fixed node, the parents of both parts will be pooled when creating the output matrix.</p>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Robin Denz</p>
    </div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Returns a numeric square matrix with one row and one column per used node in <code>dag</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="empty_dag.html">empty_dag</a></code>, <code><a href="node.html">node</a></code>, <code><a href="node.html">node_td</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/RobinDenz1/simDAG" class="external-link">simDAG</a></span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># some example DAG</span></span></span>
<span class="r-in"><span><span class="va">dag</span> <span class="op">&lt;-</span> <span class="fu"><a href="empty_dag.html">empty_dag</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="node.html">node</a></span><span class="op">(</span><span class="st">"death"</span>, type<span class="op">=</span><span class="st">"binomial"</span>, parents<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"age"</span>, <span class="st">"sex"</span><span class="op">)</span>, betas<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>       intercept<span class="op">=</span><span class="op">-</span><span class="fl">10</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="node.html">node</a></span><span class="op">(</span><span class="st">"age"</span>, type<span class="op">=</span><span class="st">"rnorm"</span>, mean<span class="op">=</span><span class="fl">10</span>, sd<span class="op">=</span><span class="fl">2</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="node.html">node</a></span><span class="op">(</span><span class="st">"sex"</span>, parents<span class="op">=</span><span class="st">""</span>, type<span class="op">=</span><span class="st">"rbernoulli"</span>, p<span class="op">=</span><span class="fl">0.5</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="node.html">node</a></span><span class="op">(</span><span class="st">"smoking"</span>, parents<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"sex"</span>, <span class="st">"age"</span><span class="op">)</span>, type<span class="op">=</span><span class="st">"binomial"</span>,</span></span>
<span class="r-in"><span>       betas<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.6</span>, <span class="fl">0.2</span><span class="op">)</span>, intercept<span class="op">=</span><span class="op">-</span><span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># get adjacency matrix</span></span></span>
<span class="r-in"><span><span class="fu">dag2matrix</span><span class="op">(</span><span class="va">dag</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         age sex death smoking</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> age       0   0     1       1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> sex       0   0     1       1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> death     0   0     0       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> smoking   0   0     0       0</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># get adjacency matrix using only the child nodes</span></span></span>
<span class="r-in"><span><span class="fu">dag2matrix</span><span class="op">(</span><span class="va">dag</span>, include_root_nodes<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         death smoking</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> death       0       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> smoking     0       0</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## adding time-varying nodes</span></span></span>
<span class="r-in"><span><span class="va">dag</span> <span class="op">&lt;-</span> <span class="va">dag</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="node.html">node_td</a></span><span class="op">(</span><span class="st">"disease"</span>, type<span class="op">=</span><span class="st">"time_to_event"</span>, parents<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"age"</span>, <span class="st">"smoking"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>          prob_fun<span class="op">=</span><span class="fl">0.01</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="node.html">node_td</a></span><span class="op">(</span><span class="st">"cve"</span>, type<span class="op">=</span><span class="st">"time_to_event"</span>, parents<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"age"</span>, <span class="st">"sex"</span>, <span class="st">"smoking"</span>,</span></span>
<span class="r-in"><span>                                                 <span class="st">"disease"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>          prob_fun<span class="op">=</span><span class="fl">0.001</span>, event_duration<span class="op">=</span><span class="cn">Inf</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># get adjacency matrix including all nodes</span></span></span>
<span class="r-in"><span><span class="fu">dag2matrix</span><span class="op">(</span><span class="va">dag</span>, include_td_nodes<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         age sex death smoking disease cve</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> age       0   0     1       1       1   1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> sex       0   0     1       1       0   1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> death     0   0     0       0       0   0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> smoking   0   0     0       0       1   1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> disease   0   0     0       0       0   1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> cve       0   0     0       0       0   0</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># get adjacency matrix including only time-constant nodes</span></span></span>
<span class="r-in"><span><span class="fu">dag2matrix</span><span class="op">(</span><span class="va">dag</span>, include_td_nodes<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         age sex death smoking</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> age       0   0     1       1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> sex       0   0     1       1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> death     0   0     0       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> smoking   0   0     0       0</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># get adjacency matrix using only the child nodes</span></span></span>
<span class="r-in"><span><span class="fu">dag2matrix</span><span class="op">(</span><span class="va">dag</span>, include_root_nodes<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         death smoking</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> death       0       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> smoking     0       0</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Robin Denz, Katharina Meiszl.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

