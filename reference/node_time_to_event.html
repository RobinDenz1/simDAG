<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="This node essentially models a dichotomous time-dependent variable for which the time of the event will be important for later usage. It adds two columns to data: name_event (whether the person currently has an event) and name_time (the time at which the current event started). Past events are stored in a list. Can only be used inside of the sim_discrete_time function, not outside of it. See details."><title>Simulate a Time-to-Event Node in Discrete-Time Simulation — node_time_to_event • simDAG</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Simulate a Time-to-Event Node in Discrete-Time Simulation — node_time_to_event"><meta property="og:description" content="This node essentially models a dichotomous time-dependent variable for which the time of the event will be important for later usage. It adds two columns to data: name_event (whether the person currently has an event) and name_time (the time at which the current event started). Past events are stored in a list. Can only be used inside of the sim_discrete_time function, not outside of it. See details."><meta property="og:image" content="https://robindenz1.github.io/simDAG/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light" data-bs-theme="light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">simDAG</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.2</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/v_covid_example.html">Simulating Covid-19 Vaccine Data using a Discrete-Time Simulation</a>
    <a class="dropdown-item" href="../articles/v_sim_discrete_time.html">Simulating Data using a Discrete-Time Approach</a>
    <a class="dropdown-item" href="../articles/v_sim_from_dag.html">Simulating Data from a known DAG</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/RobinDenz1/siMDAG/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Simulate a Time-to-Event Node in Discrete-Time Simulation</h1>
      
      <div class="d-none name"><code>node_time_to_event.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This node essentially models a dichotomous time-dependent variable for which the time of the event will be important for later usage. It adds two columns to <code>data</code>: <code>name_event</code> (whether the person currently has an event) and <code>name_time</code> (the time at which the current event started). Past events are stored in a list. Can only be used inside of the <code><a href="sim_discrete_time.html">sim_discrete_time</a></code> function, not outside of it. See details.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">node_time_to_event</span><span class="op">(</span><span class="va">data</span>, <span class="va">parents</span>, <span class="va">sim_time</span>, <span class="va">name</span>,</span>
<span>                   <span class="va">prob_fun</span>, <span class="va">...</span>, event_duration<span class="op">=</span><span class="fl">1</span>,</span>
<span>                   immunity_duration<span class="op">=</span><span class="va">event_duration</span>,</span>
<span>                   time_since_last<span class="op">=</span><span class="cn">FALSE</span>, event_count<span class="op">=</span><span class="cn">FALSE</span>,</span>
<span>                   save_past_events<span class="op">=</span><span class="cn">TRUE</span>, check_inputs<span class="op">=</span><span class="cn">TRUE</span>,</span>
<span>                   <span class="va">envir</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>data</dt>
<dd><p>A <code>data.table</code> containing all columns specified by <code>parents</code>. Similar objects such as <code>data.frame</code>s are not supported.</p></dd>

  <dt>parents</dt>
<dd><p>A character vector specifying the names of the parents that this particular child node has. Those child nodes should be valid column names in <code>data</code>. Because the state of this variable is by definition dependent on its previous states, the columns produced by this function will automatically be considered its parents without the user having to manually specify this.</p></dd>

  <dt>sim_time</dt>
<dd><p>The current time of the simulation.</p></dd>

  <dt>name</dt>
<dd><p>The name of the node. This will be used as prefix before the <code>_event</code>, <code>_time</code> columns. If the <code>time_since_last</code> or <code>event_count</code> arguments are set to <code>TRUE</code>, this will also be used as prefix for those respective columns.</p></dd>

  <dt>prob_fun</dt>
<dd><p>A function that returns a numeric vector of size <code>nrow(data)</code> containing only numbers between 0 and 1. These numbers specify the person-specific probability of experiencing the event modeled by this node at the particular point in time of the simulation. The corresponding event will be generated internally using the <code><a href="rbernoulli.html">rbernoulli</a></code> function. The function needs to have a named argument called <code>data</code>. If the function has an argument named <code>sim_time</code>, the current simulation time will also be passed to this function automatically, allowing time-dependent probabilities to be generated. Alternatively this argument can be set to a single number (between 0 and 1), resulting in a fixed probability of occurrence for every simulated individual at every point in time.</p></dd>

  <dt>...</dt>
<dd><p>An arbitrary amount of additional named arguments passed to <code>prob_fun</code>. Ignore this if you do not want to pass any arguments. Also ignored if <code>prob_fun</code> is a single number.</p></dd>

  <dt>event_duration</dt>
<dd><p>A single number &gt; 0 specifying how long the event should last. The point in time at which an event occurs also counts into this duration. For example, if an event occurs at \(t = 2\) and it has a duration of 3, the event will be set to <code>TRUE</code> on \(t \in \{2, 3, 4\}\). Therefore, all events must have a duration of at least 1 unit (otherwise they never happened).</p></dd>

  <dt>immunity_duration</dt>
<dd><p>A single number &gt;= <code>event_duration</code> specifying how long the person should be immune to the event after it is over. The count internally starts when the event starts, so in order to use an immunity duration of 10 time units after the event is over <code>event_duration + 10</code> should be used.</p></dd>

  <dt>time_since_last</dt>
<dd><p>Either <code>TRUE</code> or <code>FALSE</code> (default), indicating whether an additional column should be generated that tracks the number of time units since the individual had its last event onset. For example, if the individual experienced a single event at \(t = 10\), this column would be <code>NA</code> before time 10, 0 at time 10 and increased by 1 at each point in time. If another event happens, the time is set to 0 again. The column is named <code>paste0(name, "_time_since_last")</code>. The difference to the column ending with <code>"_time"</code> is that this column will not be set to <code>NA</code> again if the <code>immunity_duration</code> is over. It keeps counting until the end of the simulation, which may be useful when constructing event-time dependent probability functions.</p></dd>

  <dt>event_count</dt>
<dd><p>Either <code>TRUE</code> or <code>FALSE</code> (default), indicating whether an additional column should be generated that tracks the number of events the individual has already experienced. This column is 0 for all individuals at t = 0. Each time a new event occurs, the counter is increased by one. Note that only new events increase this counter. For example, an individual with an event at t = 10 that has an <code>event_duration</code> of 15 will have a value of 0 before t = 10, and will have a value of 1 at t = 10 and afterwards. The column will be named <code>paste0(name, "_event_count")</code>.</p></dd>

  <dt>save_past_events</dt>
<dd><p>When the event modeled using this node is recurrent (<code>immunity_duration &lt; Inf &amp; event_duration &lt; Inf</code>), the same person may experience multiple events over the course of the simulation. Those are generally stored in the <code>tte_past_events</code> list which is included in the output of the <code>sim_discrete_time</code> function. This extends the runtime and increases RAM usage, so if you are not interested in the timing of previous events or if you are using <code>save_states="all"</code> this functionality can be turned off by setting this argument to <code>FALSE</code>.</p></dd>

  <dt>check_inputs</dt>
<dd><p>Whether to perform plausibility checks for the user input or not. Is set to <code>TRUE</code> by default, but can be set to <code>FALSE</code> in order to speed things up when using this function in a simulation study or something similar.</p></dd>

  <dt>envir</dt>
<dd><p>Only used internally to efficiently store the past event times. Cannot be used by the user.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>When performing discrete-time simulation using the <code><a href="sim_discrete_time.html">sim_discrete_time</a></code> function, the standard node functions implemented in this package are usually not sufficient because they don't capture the time-dependent nature of some very interesting variables. Often, the variable that should be modelled has some probability of occurring at each point in time. Once it does occur, it has some kind of influence on other variables for a period of time until it goes back to normal (or doesn't). This could be a car crash, a surgery, a vaccination etc. The <code>time_to_event</code> node function can be used to model these kinds of nodes in a fairly straightforward fashion.</p>
<p><strong><em>How it Works</em></strong>:</p>
<p>At \(t = 1\), this node will be initialized for the first time. It adds two columns to the data: <code>name_event</code> (whether the person currently has an event) and <code>name_time</code> (the time at which the current event started) where <code>name</code> is the name of the node. Additionally, it adds a list with <code>max_t</code> entries to the <code>tte_past_events</code> list returned by the <code>sim_discrete_time</code> function, which records which individuals experienced a new event at each point in time.</p>
<p>In a nutshell, it simply models the occurrence of some event by calculating the probability of occurrence at \(t\) and drawing a single bernoulli trial from this probability. If the trial is a "success", the corresponding event column will be set to <code>TRUE</code>, the time column will be set to the current simulation time \(t\) and the column storing the past event times will receive an entry.</p>
<p>The <code>_event</code> column will stay <code>TRUE</code> until the event is over. The duration for that is controlled by the <code>event_duration</code> parameter. When modeling terminal events such as death, one can simply set this parameter to <code>Inf</code>, making the event eternal. In many cases it will also be necessary to implement some kind of immunity after the event, which can be done using the <code>immunity_duration</code> argument. This effectively sets the probability of another occurrence of the event to 0 in the next <code>immunity_duration</code> time steps. During the immunity duration, the event may be <code>TRUE</code> (if the event is still ongoing) or <code>FALSE</code> (if the <code>event_duration</code> has already passed). The <code>_time</code> column is similarly set to the time of occurrence of the event and reset to <code>NA</code> when the <code>immunity_duration</code> is over.</p>
<p>The probability of occurrence is calculated using the function provided by the user using the <code>prob_fun</code> argument. This can be an arbitrary complex function. The only requirement is that it takes <code>data</code> as a first argument. The columns defined by the <code>parents</code> argument will be passed to this argument automatically. If it has an argument called <code>sim_time</code>, the current time of the simulation will automatically be passed to it as well. Any further arguments can be passed using the <code>...</code> syntax. A simple example could be a logistic regression node, in which the probability is calculated as an additive linear combination of the columns defined by <code>parents</code>. A more complex function could include simulation-time dependent effects, further effects dependent on past event times etc. Examples can be found below and in the vignettes.</p>
<p><strong><em>How it is Used</em></strong>:</p>
<p>This function should never be called directly by the user. Instead, the user should define a DAG object using the <code><a href="empty_dag.html">empty_dag</a></code> and <code><a href="node.html">node_td</a></code> functions and set the <code>type</code> argument inside of a <code>node_td</code> call to <code>"time_to_event"</code>. This DAG can be passed to the <code><a href="sim_discrete_time.html">sim_discrete_time</a></code> function to generate the desired data. Many examples and more explanations are given below and in the vignettes of this package.</p>
<p><strong><em>What can be done with it</em></strong>:</p>
<p>This type of node naturally supports the implementation of terminal and recurrent events that may be influenced by pretty much anything. By specifying the <code>parents</code> and <code>prob_fun</code> arguments correctly, it is possible to create an event type that is dependent on past events of itself or other time-to-event variables and other variables in general. The user can include any amount of these nodes in their simulation. It may also be used to simulate any kind of binary time-dependent variable that one would usually not associate with the name "event" as well. It is very flexible, but it does require the user to do some coding by themselves (e.g. creating a suitable function for the <code>prob_fun</code> argument).</p>
<p><strong><em>What can't be done with it</em></strong>:</p>
<p>Currently this function only allows binary events. Categorical event types may be implemented using the <code><a href="node_competing_events.html">node_competing_events</a></code> function, which works in a very similar fashion.</p>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Robin Denz, Katharina Meiszl</p>
    </div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>Returns a <code>data.table</code> containing at least two columns with updated values of the node.</p>
    </div>
    <div class="section level2">
    <h2 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a></h2>
    <p>This function cannot be called outside of the <code><a href="sim_discrete_time.html">sim_discrete_time</a></code> function. It only makes sense to use it as a type in a <code><a href="node.html">node_td</a></code> function call, as described in the documentation and vignettes.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="empty_dag.html">empty_dag</a></code>, <code><a href="node.html">node_td</a></code>, <code><a href="sim_discrete_time.html">sim_discrete_time</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/RobinDenz1/simDAG" class="external-link">simDAG</a></span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## a simple terminal time-to-event node, with a constant probability of</span></span></span>
<span class="r-in"><span><span class="co">## occurrence, independent of any other variable</span></span></span>
<span class="r-in"><span><span class="va">dag</span> <span class="op">&lt;-</span> <span class="fu"><a href="empty_dag.html">empty_dag</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="node.html">node_td</a></span><span class="op">(</span><span class="st">"death"</span>, type<span class="op">=</span><span class="st">"time_to_event"</span>, prob_fun<span class="op">=</span><span class="fl">0.0001</span>,</span></span>
<span class="r-in"><span>          event_duration<span class="op">=</span><span class="cn">Inf</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## a simple recurrent time-to-event node with a constant probability of</span></span></span>
<span class="r-in"><span><span class="co">## occurrence, independent of any other variable</span></span></span>
<span class="r-in"><span><span class="va">dag</span> <span class="op">&lt;-</span> <span class="fu"><a href="empty_dag.html">empty_dag</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="node.html">node_td</a></span><span class="op">(</span><span class="st">"car_crash"</span>, type<span class="op">=</span><span class="st">"time_to_event"</span>, prob_fun<span class="op">=</span><span class="fl">0.001</span>, event_duration<span class="op">=</span><span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## a time-to-event node with a time-dependent probability function that</span></span></span>
<span class="r-in"><span><span class="co">## has an additional argument</span></span></span>
<span class="r-in"><span><span class="va">prob_car_crash</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">data</span>, <span class="va">sim_time</span>, <span class="va">base_p</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="va">base_p</span> <span class="op">+</span> <span class="va">sim_time</span> <span class="op">*</span> <span class="fl">0.0001</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">dag</span> <span class="op">&lt;-</span> <span class="fu"><a href="empty_dag.html">empty_dag</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="node.html">node_td</a></span><span class="op">(</span><span class="st">"car_crash"</span>, type<span class="op">=</span><span class="st">"time_to_event"</span>, prob_fun<span class="op">=</span><span class="va">prob_car_crash</span>,</span></span>
<span class="r-in"><span>          event_duration<span class="op">=</span><span class="fl">1</span>, base_p<span class="op">=</span><span class="fl">0.0001</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## a time-to-event node with a probability function dependent on a</span></span></span>
<span class="r-in"><span><span class="co">## time-fixed variable</span></span></span>
<span class="r-in"><span><span class="va">prob_car_crash</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">data</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">data</span><span class="op">$</span><span class="va">sex</span><span class="op">==</span><span class="fl">1</span>, <span class="fl">0.001</span>, <span class="fl">0.01</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">dag</span> <span class="op">&lt;-</span> <span class="fu"><a href="empty_dag.html">empty_dag</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="node.html">node</a></span><span class="op">(</span><span class="st">"sex"</span>, type<span class="op">=</span><span class="st">"rbernoulli"</span>, p<span class="op">=</span><span class="fl">0.5</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="node.html">node_td</a></span><span class="op">(</span><span class="st">"car_crash"</span>, type<span class="op">=</span><span class="st">"time_to_event"</span>, prob_fun<span class="op">=</span><span class="va">prob_car_crash</span>,</span></span>
<span class="r-in"><span>          parents<span class="op">=</span><span class="st">"sex"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## a little more complex car crash simulation, where the probability for</span></span></span>
<span class="r-in"><span><span class="co">## a car crash is dependent on the sex, and the probability of death is</span></span></span>
<span class="r-in"><span><span class="co">## highly increased for 3 days after a car crash happened</span></span></span>
<span class="r-in"><span><span class="va">prob_car_crash</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">data</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">data</span><span class="op">$</span><span class="va">sex</span><span class="op">==</span><span class="fl">1</span>, <span class="fl">0.001</span>, <span class="fl">0.01</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">prob_death</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">data</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">data</span><span class="op">$</span><span class="va">car_crash_event</span>, <span class="fl">0.1</span>, <span class="fl">0.0001</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">dag</span> <span class="op">&lt;-</span> <span class="fu"><a href="empty_dag.html">empty_dag</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="node.html">node</a></span><span class="op">(</span><span class="st">"sex"</span>, type<span class="op">=</span><span class="st">"rbernoulli"</span>, p<span class="op">=</span><span class="fl">0.5</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="node.html">node_td</a></span><span class="op">(</span><span class="st">"car_crash"</span>, type<span class="op">=</span><span class="st">"time_to_event"</span>, prob_fun<span class="op">=</span><span class="va">prob_car_crash</span>,</span></span>
<span class="r-in"><span>          parents<span class="op">=</span><span class="st">"sex"</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="node.html">node_td</a></span><span class="op">(</span><span class="st">"death"</span>, type<span class="op">=</span><span class="st">"time_to_event"</span>, prob_fun<span class="op">=</span><span class="va">prob_death</span>,</span></span>
<span class="r-in"><span>          parents<span class="op">=</span><span class="st">"car_crash_event"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># use the sim_discrete_time function to simulate data from one of these DAGs:</span></span></span>
<span class="r-in"><span><span class="va">sim</span> <span class="op">&lt;-</span> <span class="fu"><a href="sim_discrete_time.html">sim_discrete_time</a></span><span class="op">(</span><span class="va">dag</span>, n_sim<span class="op">=</span><span class="fl">20</span>, max_t<span class="op">=</span><span class="fl">500</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## more examples can be found in the vignettes of this package</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Robin Denz, Katharina Meiszl.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer></div>

  

  

  </body></html>

