<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Create a network object for a DAG — network • simDAG</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Create a network object for a DAG — network"><meta name="description" content="These functions (in conjunction with the empty_dag and node functions) allow users to create DAG objects with one or more, possibly time-varying, network structures linking individual observations to each other. This makes it possible to simulate data with complex network-based dependencies among observations using the sim_from_dag function or the sim_discrete_time function."><meta property="og:description" content="These functions (in conjunction with the empty_dag and node functions) allow users to create DAG objects with one or more, possibly time-varying, network structures linking individual observations to each other. This makes it possible to simulate data with complex network-based dependencies among observations using the sim_from_dag function or the sim_discrete_time function."><meta property="og:image" content="https://robindenz1.github.io/simDAG/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">simDAG</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.2.9999</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/simDAG.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/v_sim_from_dag.html">Simulating Data from a known DAG</a></li>
    <li><a class="dropdown-item" href="../articles/v_using_formulas.html">Specifying Formulas in a DAG</a></li>
    <li><a class="dropdown-item" href="../articles/v_custom_nodes.html">Specifying Custom Node Types in a DAG</a></li>
    <li><a class="dropdown-item" href="../articles/v_sim_discrete_time.html">Simulating Data using a Discrete-Time Approach</a></li>
    <li><a class="dropdown-item" href="../articles/v_covid_example.html">Simulating Covid-19 Vaccine Data using a Discrete-Time Simulation</a></li>
    <li><a class="dropdown-item" href="../articles/v_sim_networks.html">Simulating Data from a DAG with Network Dependencies</a></li>
    <li><a class="dropdown-item" href="../articles/v_cookbook.html">simDAG Cookbook</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/RobinDenz1/siMDAG/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Create a network object for a <code>DAG</code></h1>

      <div class="d-none name"><code>network.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>These functions (in conjunction with the <code><a href="empty_dag.html">empty_dag</a></code> and <code><a href="node.html">node</a></code> functions) allow users to create <code>DAG</code> objects with one or more, possibly time-varying, network structures linking individual observations to each other. This makes it possible to simulate data with complex network-based dependencies among observations using the <code><a href="sim_from_DAG.html">sim_from_dag</a></code> function or the <code><a href="sim_discrete_time.html">sim_discrete_time</a></code> function.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">network</span><span class="op">(</span><span class="va">name</span>, <span class="va">net</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">network_td</span><span class="op">(</span><span class="va">name</span>, <span class="va">net</span>, create_at_t0<span class="op">=</span><span class="cn">TRUE</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <p></p>
<dl><dt id="arg-name">name<a class="anchor" aria-label="anchor" href="#arg-name"></a></dt>
<dd><p>A single character string, specifying the name of the network. Contrary to the <code><a href="node.html">node</a></code> function, multiple values are not allowed, because defining the same network multiple times does not make sense.</p></dd>

  <dt id="arg-net">net<a class="anchor" aria-label="anchor" href="#arg-net"></a></dt>
<dd><p>For <code>network()</code>, two kinds of inputs are allowed. The first is an <code>igraph</code> object containing one vertex per observation (e.g. <code>n_sim</code> vertices) that should be generated when later calling <code><a href="sim_from_DAG.html">sim_from_dag</a></code> or <code><a href="sim_discrete_time.html">sim_discrete_time</a></code>. The second is a function that generates such an object, given a named argument called <code>n_sim</code> and any number of further named arguments. For <code>network_td()</code>, only the latter kind of input is allowed. Further information is given in the details section.</p></dd>

  <dt id="arg-create-at-t-">create_at_t0<a class="anchor" aria-label="anchor" href="#arg-create-at-t-"></a></dt>
<dd><p>Either <code>TRUE</code> or <code>FALSE</code>, specifying whether the network should be generated at time 0 in discrete-time simulations (e.g. when other time-independent nodes and networks are generated) or only after the creation of data time 0. Defaults to <code>TRUE</code>.</p></dd>

  <dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Optional further named arguments passed to <code>net</code> if it is a function.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>


<p><strong><em>What does it mean to add a network to a <code>DAG</code>?</em></strong></p>
<p>When using only <code><a href="node.html">node</a></code> or <code><a href="node.html">node_td</a></code> to define a <code>DAG</code>, all observations are usually generated independently from each other (if not explicitly done otherwise using a custom node function). This reflects the classic i.i.d. assumption that is frequently used everywhere. For some data generation processes, however, this assumption is insufficient. The spread of an infectious disease is a classic example.</p>
<p>The <code>network()</code> function allows users to relax this assumption, by making it possible to define one or more networks that can then be added to <code>DAG</code> objects using the <code>+</code> syntax. These networks should contain a single vertex for each observation that should be generated, placing each row of the dataset into one place in the network. Through the use of the <code><a href="net.html">net</a></code> function it is then possible to define new nodes as a function of the neighbors of an observation, where the neighbors of a vertex are defined as any other vertex that is directly connected to this node. For example, one could use this capability to use the mean age of an observations neighbors in a regression model, or use the number of infected neighbors to model the probability of infection. By combining this network-simulation approach with the already extensive simulation capabilities of <code>DAG</code> based simulations, almost any DGP can be modelled. This approach is described more rigorously in the excellent paper given by Sofrygin et al. (2017).</p>
<p><strong><em>Supported network types</em></strong>:</p>
<p>Users may add any number of networks to a <code>DAG</code> object, making it possible to embed individuals in multiple distinct networks at the same time. These networks can then be used simultaneously to define a single or multiple (possibly time-varying) nodes, using multiple <code><a href="net.html">net</a></code> function calls in the respective <code>formula</code> arguments. It is also possible to define time-varying or dynamic networks that change over time, possibly as a function of the generated data, simulation time or previous states of the network. Examples are given below and in the associated vignette.</p>
<p>Currently, only undirected networks that include exactly one vertex per observation are supported in this package. Future versions might add support for more network types. Additionally, the current syntax only allows aggregation of the values of direct neighbors of an observation, it does not allow using extended neighborhoods.</p>
<p><strong><em>Weighted Networks</em></strong>:</p>
<p>It is possible to supply weighted networks to <code>network()</code>. The weights are then also stored and available to the user when using the <code><a href="net.html">net</a></code> function through the internal <code>..weight..</code> variable. For example, if a weighted network was supplied, the following would be valid syntax: <code>net(weighted.mean(A, ..weight..))</code> (assuming that <code>A</code> is a previously defined variable). Note that the <code>..weight..</code> must be used explicitly, otherwise the weights are ignored.</p>
<p><strong><em>Computational considerations</em></strong>:</p>
<p>Including <code><a href="net.html">net()</a></code> terms in a node might significantly increase the amount of RAM used and the required computation time, especially with very large networks and / or large values of <code>n_sim</code> and / or <code>max_t</code> (the latter is only relevant in discrete-time simulations using <code><a href="sim_discrete_time.html">sim_discrete_time</a></code>). The reason for this is that each time a node is generated or updated over time, the mapping of individuals to their neighbors' values plus the subsequent aggregation has to be performed, which required <code><a href="https://rdrr.io/r/base/merge.html" class="external-link">merge()</a></code> calls etc. Usually this should not be a problem, but it might be for some large discrete-time simulations. If the same <code><a href="net.html">net</a></code> call is used in multiple nodes it can be beneficial to put it into an extra <code><a href="node.html">node</a></code> call and safe it to avoid re-calculating the same thing over and over again (see examples).</p>
<p><strong><em>Further information</em></strong>:</p>
<p>For a theoretical treatment, please consult the paper by Sofrygin et al. (2017), who also describe their slightly different implementation of this method in the <span class="pkg">simcausal</span> package. More information on how to specify network-based dependencies in a <code>DAG</code> (using <span class="pkg">simDAG</span>) after adding a network, please consult the <code><a href="net.html">net</a></code> documentation page or the associated vignette.</p>
    </div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Returns a <code>DAG.network</code> object which can be added to a <code>DAG</code> object directly.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Sofrygin, Oleg, Romain Neugebauer and Mark J. van der Laan (2017). Conducting Simulations in Causal Inference with Networks-Based Structural Equation Models. arXiv preprint, doi: 10.48550/arXiv.1705.10376</p>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Robin Denz</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Robin Denz, Katharina Meiszl.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

